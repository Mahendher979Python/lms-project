{% extends 'accounts/trainer/base.html' %}

{% block title %}Trainer Dashboard | LMS{% endblock %}

{% block extra_css %}
<style>
/* ============ ROOT ============ */
:root{
    --primary:#2563eb;
    --success:#22c55e;
    --danger:#ef4444;
    --bg:#f4f7fb;
    --dark:#0f172a;
    --white:#ffffff;
    --border:#e5e7eb;
}

/* ============ BASE ============ */
body{
    background:var(--bg);
    overflow:hidden; /* ‚ùå no full page scroll */
}

.content{
    height:calc(100vh - 60px);
    overflow-y:auto; /* ‚úÖ only content scroll */
    padding:25px;
}

/* ============ HEADER ============ */
.dashboard-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:25px;
}

.dashboard-header h2{
    font-size:22px;
}

.dashboard-header p{
    color:#64748b;
}

/* ============ ACTION CARDS ============ */
.quick-actions{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:20px;
    margin-bottom:30px;
}

.action-box{
    background:var(--white);
    padding:25px;
    border-radius:14px;
    box-shadow:0 6px 18px rgba(0,0,0,.06);
}

.action-box h3{
    margin-bottom:6px;
}

.action-box p{
    color:#64748b;
    margin-bottom:15px;
}

.action-box a{
    padding:8px 18px;
    background:#38bdf8;
    border-radius:8px;
    color:#0f172a;
    font-weight:600;
    text-decoration:none;
}

.action-box a:hover{
    background:#0ea5e9;
    color:#fff;
}

/* ============ SECTION TITLE ============ */
.section-title{
    display:flex;
    align-items:center;
    gap:8px;
    margin:25px 0 12px;
    font-size:18px;
}

/* ============ SEARCH ============ */
.search-box input{
    width:100%;
    padding:12px 14px;
    border-radius:10px;
    border:1px solid var(--border);
    margin-bottom:15px;
}

/* ============ TABLE ============ */
.table-wrapper{
    background:var(--white);
    border-radius:14px;
    box-shadow:0 6px 18px rgba(0,0,0,.06);
    overflow:hidden;
}

table{
    width:100%;
    border-collapse:collapse;
}

th,td{
    padding:16px;
    border-bottom:1px solid var(--border);
}

th{
    background:#f9fafb;
    text-align:left;
    font-weight:600;
}

tr:hover{
    background:#f8fafc;
}

.course-title{
    font-weight:600;
}

.course-meta{
    font-size:13px;
    color:#64748b;
}

/* ============ STATUS ============ */
.badge{
    padding:6px 14px;
    border-radius:20px;
    font-size:12px;
    font-weight:600;
}

.badge.success{
    background:#dcfce7;
    color:#166534;
}

.badge.draft{
    background:#fee2e2;
    color:#991b1b;
}

/* ============ ACTIONS ============ */
.actions a{
    margin-right:10px;
    font-size:18px;
    text-decoration:none;
}

.actions .pdf{ color:#2563eb; }
.actions .edit{ color:#64748b; }

/* ============ MOBILE ============ */
@media(max-width:768px){
    .dashboard-header{
        flex-direction:column;
        align-items:flex-start;
        gap:6px;
    }
}
</style>
{% endblock %}

{% block content %}

<!-- HEADER -->
<div class="dashboard-header">
    <div>
        <h2>Trainer Dashboard</h2>
        <p>Welcome, <strong>{{ request.user.username }}</strong></p>
    </div>
</div>

<!-- QUICK ACTIONS -->
<div class="quick-actions">
    <div class="action-box">
        <h3>üé• Videos</h3>
        <p>Manage session recordings</p>
        <a href="{% url 'trainer_video_list' %}">Open</a>
    </div>

    <div class="action-box">
        <h3>üñº Images</h3>
        <p>Posters & Ads</p>
        <a href="{% url 'trainer_ad_list' %}">Open</a>
    </div>

    <div class="action-box">
        <h3>‚ûï New Course</h3>
        <p>Create curriculum</p>
        <a href="{% url 'trainer_course_create' %}">Create</a>
    </div>
</div>

<!-- COURSES -->
<h3 class="section-title">üìÇ My Courses</h3>

<div class="search-box">
    <input type="text" id="searchInput" placeholder="üîç Search course...">
</div>

<div class="table-wrapper">
<table id="courseTable">
    <thead>
        <tr>
            <th>ID</th>
            <th>Course</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for course in courses %}
        <tr>
            <td>#{{ course.id }}</td>

            <td>
                <div class="course-title">{{ course.title }}</div>
                <div class="course-meta">
                    {{ course.level|title }} ‚Ä¢ {{ course.duration }}
                </div>
            </td>

            <td>
                {% if course.is_published %}
                    <span class="badge success">Published</span>
                {% else %}
                    <span class="badge draft">Draft</span>
                {% endif %}
            </td>

            <td class="actions">
                <a href="#" class="pdf">üìÑ</a>
                <a href="{% url 'trainer_course_edit' course.id %}" class="edit">‚úè</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4" style="text-align:center;padding:25px;">
                No courses found
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>

{% endblock %}

{% block extra_js %}
<script>
document.getElementById("searchInput").addEventListener("keyup", function(){
    let v=this.value.toLowerCase();
    document.querySelectorAll("#courseTable tbody tr").forEach(r=>{
        r.style.display=r.innerText.toLowerCase().includes(v)?"":"none";
    });
});
</script>
{% endblock %}
