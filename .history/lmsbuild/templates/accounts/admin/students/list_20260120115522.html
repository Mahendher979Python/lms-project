{% extends "admin/admin_base.html" %}

{% block content %}
<style>
/* 3D Dark Theme Variables */
:root { --bg-card: #0f172a; --text-main: #f8fafc; --blue: #38bdf8; --green: #22c55e; --red: #ef4444; }

.lms-wrapper {
    background: radial-gradient(circle at top, #1e293b, #020617);
    padding: 30px; border-radius: 20px; min-height: 85vh; color: var(--text-main);
}
.header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
.header-row h2 { font-size: 28px; font-weight: 800; text-shadow: 0 0 10px rgba(56,189,248,0.4); }

/* 3D Button */
.btn-3d {
    padding: 10px 20px; border-radius: 10px; text-decoration: none; font-weight: bold;
    box-shadow: 0 4px 0 rgba(0,0,0,0.3); transition: transform 0.1s; display: inline-block;
}
.btn-add { background: var(--blue); color: #000; box-shadow: 0 4px 0 #0284c7; }
.btn-add:active { transform: translateY(4px); box-shadow: none; }

/* Table Styles */
.table-card { background: var(--bg-card); border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
table { width: 100%; border-collapse: collapse; }
th { background: #1e293b; padding: 15px; text-align: left; color: #94a3b8; text-transform: uppercase; font-size: 12px; }
td { padding: 15px; border-bottom: 1px solid #334155; color: #cbd5e1; }
tr:hover { background: #1e293b; }

/* Badges */
.badge { padding: 5px 10px; border-radius: 20px; font-size: 12px; font-weight: bold; }
.active { background: rgba(34,197,94,0.2); color: var(--green); }
.inactive { background: rgba(239,68,68,0.2); color: var(--red); }

/* Action Buttons */
.btn-sm { padding: 5px 10px; font-size: 12px; margin-right: 5px; color: white; }
.btn-edit { background: #10b981; box-shadow: 0 3px 0 #059669; }
.btn-del { background: #ef4444; box-shadow: 0 3px 0 #b91c1c; }
.btn-sm:active { transform: translateY(3px); box-shadow: none; }
</style>

<div class="lms-wrapper">
    <div class="header-row">
        <h2>Student Management</h2>
        <a href="{% url 'admin_add_student' %}" class="btn-3d btn-add">+ Add Student</a>
    </div>

    {% if messages %}
        {% for message in messages %}
        <div style="background: rgba(56,189,248,0.1); border-left: 4px solid var(--blue); padding: 10px; margin-bottom: 20px;">
            {{ message }}
        </div>
        {% endfor %}
    {% endif %}

    <div class="table-card">
        <table>
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td style="font-weight:bold; color:white;">{{ student.username }}</td>
                    <td>{{ student.email }}</td>
                    <td>
                        {% if student.is_active %}
                            <span class="badge active">Active</span>
                        {% else %}
                            <span class="badge inactive">Inactive</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'admin_edit_student' student.id %}" class="btn-3d btn-sm btn-edit">Edit</a>
                        <a href="{% url 'admin_delete_student' student.id %}" onclick="return confirm('Delete {{ student.username }}?')" class="btn-3d btn-sm btn-del">Delete</a>
                    </td>
                </tr>
                {% empty %}
                <tr><td colspan="4" style="text-align:center; padding: 20px;">No students found.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}