{% extends "accounts/admin/base.html" %}
{% block content %}

<style>
.report-card{
  background:#fff;
  padding:25px;
  border-radius:16px;
  box-shadow:0 15px 40px rgba(0,0,0,.08);
}
.filter-bar{
  display:flex;
  gap:15px;
  flex-wrap:wrap;
  margin-bottom:20px;
}
.filter-bar input,
.filter-bar select{
  padding:10px;
  border-radius:8px;
  border:1px solid #cbd5e1;
}
.btn{
  padding:10px 18px;
  border-radius:8px;
  border:none;
  font-weight:600;
  color:#fff;
}
.generate{background:#2563eb}
.export{background:#22c55e}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:20px;
}
th,td{
  padding:12px;
  text-align:center;
  border-bottom:1px solid #e5e7eb;
}
th{background:#f1f5f9}
.role-student{color:#16a34a;font-weight:700}
.role-trainer{color:#2563eb;font-weight:700}
</style>

<div class="report-card">
  <h2>ðŸ“Š Attendance Monthly Report</h2>

  <!-- FILTER -->
  <form method="get" class="filter-bar">
    <input type="month" name="month" required>
    <button class="btn generate">Generate</button>

    <a href="{% url 'admin_attendance_export' %}" class="btn export">
      ðŸ“¤ Export Excel
    </a>
  </form>

  {% if data %}
  <table>
    <tr>
      <th>User</th>
      <th>Role</th>
      <th>Days Present</th>
    </tr>
    {% for d in data %}
    <tr>
      <td>{{ d.user__username }}</td>
      <td>
        {% if d.role == "student" %}
          <span class="role-student">Student</span>
        {% else %}
          <span class="role-trainer">Trainer</span>
        {% endif %}
      </td>
      <td>{{ d.total_days }}</td>
    </tr>
    {% endfor %}
  </table>
  {% else %}
    <p style="margin-top:20px;color:#64748b">
      Select a month to generate report
    </p>
  {% endif %}
</div>

{% endblock %}
