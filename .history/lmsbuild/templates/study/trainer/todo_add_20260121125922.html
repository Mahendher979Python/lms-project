{% extends "accounts/trainer/base.html" %}

{% block content %}
<h2>âž• Add Todo</h2>

<form method="POST" enctype="multipart/form-data">
  {% csrf_token %}

  <p>
    <strong>Title:</strong><br>
    <input type="text" name="title" required style="width:400px;">
  </p>

  <p>
    <strong>Description:</strong><br>
    <textarea name="description" rows="4" style="width:400px;"></textarea>
  </p>

  <p>
    <strong>File (optional):</strong><br>
    <input type="file" name="file">
  </p>

  <hr>

  <p><strong>Assign Students:</strong></p>

  <!-- ALL STUDENTS OPTION -->
  <label>
    <input type="checkbox" id="select-all">
    <strong>All Students</strong>
  </label>

  <br><br>

  <!-- INDIVIDUAL STUDENTS -->
  {% for student in students %}
    <label>
      <input type="checkbox" name="students" value="{{ student.id }}" class="student-checkbox">
      {{ student.username }}
    </label><br>
  {% empty %}
    <p>No students found</p>
  {% endfor %}

  <br>

  <button type="submit">ðŸ’¾ Save Todo</button>
  <a href="{% url 'trainer_todo_list' %}" style="margin-left:10px;">â¬… Back</a>
</form>

<!-- JS FOR SELECT ALL -->
<script>
  const selectAll = document.getElementById("select-all");
  const studentCheckboxes = document.querySelectorAll(".student-checkbox");

  selectAll.addEventListener("change", function () {
    studentCheckboxes.forEach(cb => cb.checked = this.checked);
  });
</script>

{% endblock %}
