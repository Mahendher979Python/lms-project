{% extends "accounts/trainer/base.html" %}

{% block content %}
<div class="container-3d">
  
  <div class="neu-card">
    <h2 style="text-align: center; margin-bottom: 30px; color: #6d5dfc;">âž• Create New Task</h2>

    <form method="POST" enctype="multipart/form-data">
      {% csrf_token %}

      <div class="form-group">
        <label class="label-3d">Task Title</label>
        <input type="text" name="title" class="neu-input" required placeholder="Enter task title...">
      </div>

      <div class="form-group">
        <label class="label-3d">Description</label>
        <textarea name="description" rows="4" class="neu-input" placeholder="What needs to be done?"></textarea>
      </div>

      <div class="form-group">
        <label class="label-3d">Attachment (Optional)</label>
        <input type="file" name="file" class="neu-input" style="padding: 10px;">
      </div>

      <hr style="border: 0; border-top: 1px solid #d1d9e6; margin: 30px 0;">

      <div class="form-group">
        <label class="label-3d">Assign Students</label>
        
        <div class="neu-input student-box">
          <label style="display: flex; align-items: center; margin-bottom: 15px; cursor: pointer;">
            <input type="checkbox" id="select-all" style="margin-right: 10px; transform: scale(1.2);">
            <strong>Select All Students</strong>
          </label>

          {% for student in students %}
            <label style="display: flex; align-items: center; margin-bottom: 8px; cursor: pointer;">
              <input type="checkbox" name="students" value="{{ student.id }}" class="student-checkbox" style="margin-right: 10px;">
              {{ student.username }}
            </label>
          {% empty %}
            <p style="text-align: center; opacity: 0.6;">No students available</p>
          {% endfor %}
        </div>
      </div>

      <div style="display: flex; justify-content: space-between; margin-top: 30px;">
        <a href="{% url 'trainer_todo_list' %}" class="neu-btn">â¬… Back</a>
        <button type="submit" class="neu-btn primary">ðŸ’¾ Save Todo</button>
      </div>
    </form>
  </div>
</div>

<script>
  const selectAll = document.getElementById("select-all");
  const studentCheckboxes = document.querySelectorAll(".student-checkbox");

  selectAll.addEventListener("change", function () {
    studentCheckboxes.forEach(cb => cb.checked = this.checked);
  });
</script>

{% endblock %}