{% extends "accounts/admin/base.html" %}
{% block content %}

<style>
/* ===== BASE ===== */
body{
 background:#f1f5f9;
 font-family:Segoe UI;
 color:#0f172a;
}

.page{
 max-width:1200px;
 margin:auto;
 padding:20px;
}

/* ===== ANALYTICS CARDS ===== */
.stats{
 display:grid;
 grid-template-columns:repeat(5,1fr);
 gap:16px;
 margin-bottom:25px;
}

.stat{
 background:white;
 border-radius:12px;
 padding:18px;
 box-shadow:0 8px 25px rgba(0,0,0,.06);
 display:flex;
 flex-direction:column;
 gap:6px;
}

.stat h4{
 font-size:.85rem;
 color:#64748b;
 margin:0;
}

.stat strong{
 font-size:1.8rem;
 color:#0f172a;
}

.stat.blue{border-left:5px solid #6366f1}
.stat.green{border-left:5px solid #22c55e}
.stat.red{border-left:5px solid #ef4444}
.stat.sky{border-left:5px solid #0ea5e9}
.stat.purple{border-left:5px solid #8b5cf6}

/* ===== HEADER ===== */
.header{
 display:flex;
 justify-content:space-between;
 align-items:center;
 margin-bottom:15px;
}

.header h2{
 margin:0;
 font-size:1.4rem;
}

/* ===== BUTTON ===== */
.btn{
 background:#6366f1;
 color:white;
 padding:10px 18px;
 border-radius:8px;
 text-decoration:none;
 font-weight:600;
 transition:.2s;
}
.btn:hover{background:#4f46e5}

/* ===== TABLE ===== */
.table-box{
 background:white;
 border-radius:14px;
 box-shadow:0 10px 30px rgba(0,0,0,.07);
 overflow:hidden;
}

table{
 width:100%;
 border-collapse:collapse;
}

th{
 background:#f8fafc;
 text-align:left;
 padding:14px;
 font-size:.85rem;
 color:#64748b;
}

td{
 padding:14px;
 border-top:1px solid #e5e7eb;
}

tr:hover td{background:#f1f5f9}

.badge{
 padding:4px 10px;
 border-radius:999px;
 font-size:.75rem;
 font-weight:600;
}

.public{background:#dcfce7;color:#166534}
.private{background:#fee2e2;color:#991b1b}

.actions a{
 margin-right:10px;
 text-decoration:none;
 font-size:1rem;
}
</style>

<div class="page">

<!-- ANALYTICS -->
<div class="stats">
 <div class="stat blue">
  <h4>Total Notes</h4>
  <strong>{{total_notes}}</strong>
 </div>
 <div class="stat green">
  <h4>Public</h4>
  <strong>{{public_notes}}</strong>
 </div>
 <div class="stat red">
  <h4>Private</h4>
  <strong>{{private_notes}}</strong>
 </div>
 <div class="stat sky">
  <h4>Courses</h4>
  <strong>{{courses_count}}</strong>
 </div>
 <div class="stat purple">
  <h4>Assigned Users</h4>
  <strong>{{assigned_users}}</strong>
 </div>
</div>

<!-- HEADER -->
<div class="header">
 <h2>üìò Notes</h2>
 <a href="{% url 'admin_notes_add' %}" class="btn">‚ûï Add Note</a>
</div>

<!-- TABLE -->
<div class="table-box">
<table>
<thead>
<tr>
<th>Title</th>
<th>Course</th>
<th>Visibility</th>
<th>Users</th>
<th>Actions</th>
</tr>
</thead>
<tbody>
{% for n in notes %}
<tr>
<td><strong>{{n.title}}</strong></td>
<td>{{n.course.title|default:"--"}}</td>
<td>
 <span class="badge {% if n.visibility == 'public' %}public{% else %}private{% endif %}">
  {{n.visibility|title}}
 </span>
</td>
<td>üë• {{n.assigned_to.count}}</td>
<td class="actions">
 <a href="{% url 'admin_notes_edit' n.id %}">‚úèÔ∏è</a>
 <a href="{% url 'admin_notes_delete' n.id %}" style="color:#ef4444">üóëÔ∏è</a>
</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>

</div>

{% endblock %}
